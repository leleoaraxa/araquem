{% set rows = rows if rows is defined else [] %}

{% if rows and rows|length > 0 -%}
  {% set latest = rows[0] %}
  **Último registro em {{ latest.ref_date if latest.ref_date is not none else '-' }}**

  - IPCA: **{{ latest.ipca if latest.ipca is not none else '-' }}**
  - Juros: **SELIC {{ latest.selic if latest.selic is not none else '-' }}**, **CDI {{ latest.cdi if latest.cdi is not none else '-' }}**
  - Índices: **IFIX {{ latest.ifix_points if latest.ifix_points is not none else '-' }} pts ({{ latest.ifix_var_pct if latest.ifix_var_pct is not none else '-' }})**, **IBOV {{ latest.ibov_points if latest.ibov_points is not none else '-' }} pts ({{ latest.ibov_var_pct if latest.ibov_var_pct is not none else '-' }})**
  - Câmbio: **USD compra {{ latest.usd_buy_amt if latest.usd_buy_amt is not none else '-' }}, venda {{ latest.usd_sell_amt if latest.usd_sell_amt is not none else '-' }} ({{ latest.usd_var_pct if latest.usd_var_pct is not none else '-' }})**; **EUR compra {{ latest.eur_buy_amt if latest.eur_buy_amt is not none else '-' }}, venda {{ latest.eur_sell_amt if latest.eur_sell_amt is not none else '-' }} ({{ latest.eur_var_pct if latest.eur_var_pct is not none else '-' }})**

  | Data ref. | IPCA | SELIC | CDI | IFIX (pts) | IFIX var. (%) | IBOV (pts) | IBOV var. (%) | USD compra (R$) | USD venda (R$) | USD var. (%) | EUR compra (R$) | EUR venda (R$) | EUR var. (%) |
  | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
  {% for r in rows -%}
  | {{ r.ref_date if r.ref_date is not none else '-' }} | {{ r.ipca if r.ipca is not none else '-' }} | {{ r.selic if r.selic is not none else '-' }} | {{ r.cdi if r.cdi is not none else '-' }} | {{ r.ifix_points if r.ifix_points is not none else '-' }} | {{ r.ifix_var_pct if r.ifix_var_pct is not none else '-' }} | {{ r.ibov_points if r.ibov_points is not none else '-' }} | {{ r.ibov_var_pct if r.ibov_var_pct is not none else '-' }} | {{ r.usd_buy_amt if r.usd_buy_amt is not none else '-' }} | {{ r.usd_sell_amt if r.usd_sell_amt is not none else '-' }} | {{ r.usd_var_pct if r.usd_var_pct is not none else '-' }} | {{ r.eur_buy_amt if r.eur_buy_amt is not none else '-' }} | {{ r.eur_sell_amt if r.eur_sell_amt is not none else '-' }} | {{ r.eur_var_pct if r.eur_var_pct is not none else '-' }} |
  {% endfor -%}
{%- else -%}
  {{ empty_message or "Nenhum registro encontrado." }}
{%- endif %}
