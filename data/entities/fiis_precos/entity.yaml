id: fiis_precos
result_key: precos_fii
sql_view: fiis_precos
private: false
description: Série diária de preços por FII (fechamento, abertura, variação, máxima
  e mínima)

options:
  supports_multi_ticker: true

identifiers:
- name: ticker
  description: Ticker do FII normalizado (AAAA11)
default_date_field: traded_at
columns:
- name: ticker
  alias: Código FII
  description: Código do fundo na B3 (AAAA11).
- name: traded_at
  alias: Data de negociação
  description: Data do pregão (yyyy-mm-dd).
- name: close_price
  alias: Preço de fechamento
  description: Preço de fechamento do dia.
- name: adj_close_price
  alias: Fechamento ajustado
  description: Preço de fechamento ajustado por eventos.
- name: open_price
  alias: Preço de abertura
  description: Preço de abertura do dia.
- name: max_price
  alias: Máxima do dia
  description: Maior preço negociado no dia.
- name: min_price
  alias: Mínima do dia
  description: Menor preço negociado no dia.
- name: daily_variation_pct
  alias: Variação diária (%)
  description: Variação percentual do dia vs. anterior.
- name: created_at
  alias: Criado em
  description: Data de criação do registro.
- name: updated_at
  alias: Atualizado em
  description: Data da última atualização do registro.
presentation:
  kind: table
  fields:
    key: traded_at
    value: close_price
  empty_message: Sem preços para exibir.

ask:
  intents:
    - fiis_precos

  keywords:
    - preco
    - cotacao
    - abertura
    - fechar
    - fechamento
    - maxima
    - minima
    - variacao
    - diaria
    - hoje
    - historico
    - serie
    - preco medio

  phrase_includes:
    - "preco do"
    - "cotacao do"
    - "preco historico do"
    - "preco medio do"
    - "qual o preco do"
    - "qual a cotacao do"
    - "quanto ta o"
    - "quanto esta o"
    - "qual meu preco medio do"

  synonyms:
    ticker:
      - ativo
      - papel
      - fundo
      - fii
    traded_at:
      - negociacao
      - pregao
    close_price:
      - fechamento
      - fechar
      - preco de fechamento
    adj_close_price:
      - ajustado
      - fechamento ajustado
    open_price:
      - abertura
      - abrir
      - preco de abertura
    max_price:
      - maxima
      - maxima do dia
    min_price:
      - minima
      - minima do dia
    daily_variation_pct:
      - variacao
      - variacao diaria
      - oscilacao
      - alta do dia
      - queda do dia

  weights:
    identifiers: 2.0
    keywords: 1.0
    synonyms: 0.5

order_by_whitelist:
- traded_at desc
aggregations:
  enabled: true
  defaults:
    inference: true
    list:
      limit: 10
      order: desc
    avg:
      window: months:6
    sum:
      window: months:12
  windows_allowed:
  - months:3
  - months:6
  - months:12
  - months:24
  - count:3
  - count:6
  - count:12
  - count:24
  - count:1
