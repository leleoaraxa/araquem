id: fiis_yield_history
result_key: yield_history
sql_view: fiis_yield_history
private: false
description: Serie histórica do dividend yield por mes/ano.

options:
  supports_multi_ticker: true

identifiers:
- name: ticker
  description: Ticker do FII normalizado (AAAA11)

default_date_field: ref_month
columns:
- name: ticker
  alias: Código FII
  description: Código do fundo na B3 (AAAA11).
- name: ref_month
  alias: Mês ref.
  description: Mês de referência (primeiro dia do mês).
- name: dividends_sum
  alias: Dividendos (R$)
  description: Soma dos dividendos pagos no mês (R$ por cota).
- name: price_ref
  alias: Preço ref. (R$)
  description: Preço de referência da cota no mês (última cotação disponível no mês).
- name: dy_monthly
  alias: DY mensal
  description: Dividend yield mensal (dividends_sum / price_ref).

ask:
  intents:
    - fiis_yield_history
  requires_identifiers:
    - ticker
  keywords:
    - dy 12m historico
    - dy 24m historico
    - dy historico
    - dy mensal historico
    - evolucao do dy
    - evolucoes do dy
    - historico de dividend yield
    - historico de dy
    - serie historica de dy
    - yield mensal historico
    - historico de dy mensal
    - dy historico mensal
  anti_tokens:
    - acumulado de dividendos
    - dividendos
    - proventos
    - recebeu
    - recebi
    - rendimento recebido
    - minha
    - minhas
    - meu
    - meus
    - carteira
    - custodia
    - posicao
    - posicoes
    - posicoes
    - renda
    - dy atual
    - dy de hoje
    - preco
    - precos
    - cotacao
    - cotacoes
    - cotacaoo
    - cotaco
    - noticia
    - noticias
    - macro
    - risco
    - riscos
    - nao
    - nao tem
    - nao existe
    - sem
    - sem dados
    - nao encontrei
  phrase_includes:
    - "dy historico do"
    - "dy mensal do"
    - "dy 12m do"
    - "evolucao do dy do"
    - "historico de dividend yield do"
    - "historico de dy do"
    - "serie historica de dy do"
    - "yield mensal do"
    - "dy historico do fundo"
    - "evolucao do dy"
    - "evolucao do dy do"
  synonyms:
    ticker:
      - ativo
      - fii
      - fundo
      - papel
    ref_month:
      - competencia
      - mes base
      - mes de referencia
    dy_monthly:
      - dy
      - dividend yield
      - yield mensal
  weights:
    identifiers: 2.0
    keywords: 1.0
    synonyms: 0.5
  sample_questions:
  - dy historico do MXRF11 nos ultimos 12 meses
  - evolucao do dy do CPTS11 por mes
  - qual foi o dy mensal do HGLG11 em 09/2024
  - serie historica de dy do VISC11

order_by_whitelist:
- ref_month desc
aggregations:
  enabled: true
  defaults:
    inference: true
    list:
      limit: 24
      order: desc
    avg:
      window: months:6
    sum:
      window: months:12
  windows_allowed:
  - months:3
  - months:6
  - months:12
  - months:24
  - count:3
  - count:6
  - count:12
  - count:24
  - count:1

presentation:
  kind: table
  empty_message: "Nenhum registro encontrado."

responses:
  default:
    kind: table
    template: responses/table.md.j2
