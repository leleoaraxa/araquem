{% set rows = rows if rows is defined else [] %}

{% if not rows or rows|length == 0 -%}
{{ empty_message or "Nenhum registro encontrado." }}
{%- else -%}
{%- set r = rows[0] %}

**Dividendos e yield do{{ ' ' + r.ticker if r.ticker else '' }}**

- Mês de referência: **{{ r.ref_month|date_br if r.ref_month is not none else '-' }}**
- Data-com (cutoff): **{{ r.traded_until_date|datetime_br if r.traded_until_date is not none else '-' }}**
- Data de pagamento: **{{ r.payment_date|datetime_br if r.payment_date is not none else '-' }}**
- Dividendo por cota: **{{ r.dividend_amt|currency_br if r.dividend_amt is not none else '-' }}**
- DY mensal: **{{ r.dy_current_monthly_pct|percent_raw_br if r.dy_current_monthly_pct is not none else '-' }}**
- DY 12 meses: **{{ r.dy_12m_pct|percent_raw_br if r.dy_12m_pct is not none else '-' }}**
- Dividendos acumulados 12m: **{{ r.dividends_12m_amt|currency_br if r.dividends_12m_amt is not none else '-' }}**
- Último dividendo pago: **{{ r.last_dividend_amt|currency_br if r.last_dividend_amt is not none else '-' }}** em **{{ r.last_payment_date|datetime_br if r.last_payment_date is not none else '-' }}**

{% set ultimos = rows[:12] %}
| Mês de referência | Dividendo (R$) | DY mensal | DY 12m |
| --- | --- | --- | --- |
{%- for row in ultimos %}
| {{ row.ref_month|date_br if row.ref_month is not none else '-' }} | {{ row.dividend_amt|currency_br if row.dividend_amt is not none else '-' }} | {{ row.dy_current_monthly_pct|percent_raw_br if row.dy_current_monthly_pct is not none else '-' }} | {{ row.dy_12m_pct|percent_raw_br if row.dy_12m_pct is not none else '-' }} |
{%- endfor %}

{%- endif %}
