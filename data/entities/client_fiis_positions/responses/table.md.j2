{% set rows = rows if rows is defined else [] %}

{% if rows and rows|length > 0 -%}
  {% set first = rows[0] %}
  **Posições do cliente em FIIs**

  - Data da posição: **{{ first.position_date if first.position_date is not none else '-' }}**

  | Ticker | Quantidade | Disponível | Preço médio | Preço de fechamento | Rentabilidade | Peso na carteira | Corretora |
  | --- | ---: | ---: | ---: | ---: | ---: | ---: | --- |
  {%- for r in rows %}
  | {{ r.ticker or '-' }} | {{ r.qty if r.qty is not none else '-' }} | {{ r.available_quantity if r.available_quantity is not none else '-' }} | {{ r.average_price if r.average_price is not none else '-' }} | {{ r.closing_price if r.closing_price is not none else '-' }} | {{ r.profitability_percentage if r.profitability_percentage is not none else '-' }} | {{ r.percentage if r.percentage is not none else '-' }} | {{ r.participant_name or '-' }} |
  {%- endfor %}
{%- else -%}
  {{ empty_message or "Sem posições disponíveis." }}
{%- endif %}
