id: history_b3_indexes
result_key: history_b3_indexes
sql_view: history_b3_indexes
private: false
description: Índices de mercado da B3 (IBOV, IFIX, IFIL) em base D-1.
d_minus: 1

default_date_field: index_date

columns:
- name: index_date
  alias: Data (D-1)
  description: Data/hora da observação (sem tempo real).
- name: ibov_points_count
  alias: IBOV (pts)
  description: Pontos do índice Ibovespa.
- name: ibov_var_pct
  alias: IBOV (Δ%)
  description: Variação percentual diária do Ibovespa.
- name: ifix_points_count
  alias: IFIX (pts)
  description: Pontos do índice IFIX.
- name: ifix_var_pct
  alias: IFIX (Δ%)
  description: Variação percentual diária do IFIX.
- name: ifil_points_count
  alias: IFIL (pts)
  description: Pontos do índice IFIL.
- name: ifil_var_pct
  alias: IFIL (Δ%)
  description: Variação percentual diária do IFIL.
- name: created_at
  alias: Criado em
  description: Data de criação do registro.
- name: updated_at
  alias: Atualizado em
  description: Data da última atualização do registro.

presentation:
  kind: list
  fields:
    key: index_date
    value: ibov_points_count
  empty_message: Nenhum dado de índices encontrado.

ask:
  intents:
  - history_b3_indexes
  keywords:
    - fechamento
    - hoje
    - d-1
    - do dia
    - atual
    - historico
    - ibov
    - ibovespa
    - ifil
    - ifix
    - indice
    - indices
    - pontos
    - variacao
    - variacao diaria
  anti_tokens:
    - minha
    - minhas
    - meu
    - meus
    - carteira
    - custodia
    - posicao
    - posicoes
    - dolar
    - euro
    - usd
    - eur
    - cambio
    - selic
    - cdi
    - ipca
    - inflacao
    - juros
    - fii
    - fiis
    - fundo
    - fundos
    - fundo imobiliario
    - fundo de investimento imobiliario
    - cotacao de fii
    - preco de fii
    - cliente
    - noticia
    - noticias
  phrase_includes:
    - variacao diaria do ifix
    - variacao diaria do ifil
    - variacao do ibov
    - historico do ifix
    - historico do ifix nos ultimos
    - como o ifix se comportou
    - como o ifix se comportou em
    - "ifix d-1"
    - "ibov d-1"
    - "ifil d-1"
    - "ifix hoje"
    - "ifil hoje"
    - "ibov hoje"
    - "ifix do dia"
    - "ifil do dia"
    - "ibov do dia"
    - "pontos do ifix"
    - "pontos do ibov"
  synonyms:
    index_date:
    - data
    - dia
  weights:
    identifiers: 1.0
    keywords: 1.5
    synonyms: 0.5

sample_questions:
- histórico do IFIX nos últimos 6 meses
- como o IFIX se comportou em 2024

order_by_whitelist:
- index_date desc
- ibov_points_count desc
- ifix_points_count desc
- ifil_points_count desc

aggregations:
  enabled: true
  defaults:
    inference: true
    list:
      limit: 10
      order: desc

responses:
  default:
    kind: list
    template: responses/list.md.j2
