terms:
- name: rag
  kind: policy
  scope: rag
  version: 2
version: 2
profiles:
  default:
    k: 6
    min_score: 0.2
    weight:
      bm25: 0.7
      semantic: 0.3
    tie_break: semantic
    max_context_chars: 12000
  macro:
    k: 4
    min_score: 0.1
    weight:
      bm25: 0.5
      semantic: 0.5
    tie_break: semantic
  risk:
    k: 6
    min_score: 0.15
    weight:
      bm25: 0.6
      semantic: 0.4
routing:
  deny_intents:
  - client_fiis_positions
  - client_fiis_dividends_evolution
  - client_fiis_performance_vs_benchmark
  - fiis_cadastro
  - fiis_precos
  - fiis_dividendos
  - fiis_yield_history
  - fiis_imoveis
  - fiis_noticias
  - fiis_rankings
  - fiis_processos
  - fiis_financials_snapshot
  - fiis_financials_revenue_schedule
  - fiis_financials_risk
  - fii_overview
  - dividendos_yield
  - carteira_enriquecida
  - macro_consolidada
  allow_intents:
  - history_market_indicators
  - history_b3_indexes
  - history_currency_rates
  notes: >
    RAG é ativado somente para domínios textuais do Bucket C
    (macroeconomia, índices B3 e moedas). Buckets A e B permanecem
    puramente SQL; dados numéricos continuam sem RAG.
rag:
  entities:
    history_market_indicators:
      profile: macro
      collections:
      - concepts-macro
      max_chunks: 4
      min_score: 0.1
    history_b3_indexes:
      profile: macro
      collections:
      - concepts-macro
      max_chunks: 4
      min_score: 0.1
    history_currency_rates:
      profile: macro
      collections:
      - concepts-macro
      max_chunks: 4
      min_score: 0.1
  default:
    profile: default
    max_chunks: 3
    collections:
    - concepts-fiis
    min_score: 0.25
