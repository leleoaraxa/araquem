{% set rows = rows if rows is defined else [] %}

{% if rows and rows|length > 0 -%}
  {% set latest = rows[0] %}
  **Índices B3 (D-1)**

  Última data {{ latest.index_date if latest.index_date is not none else '-' }}:
  - IBOV: **{{ latest.ibov_points_count if latest.ibov_points_count is not none else '-' }} pts** (Δ **{{ latest.ibov_var_pct if latest.ibov_var_pct is not none else '-' }}**)
  - IFIX: **{{ latest.ifix_points_count if latest.ifix_points_count is not none else '-' }} pts** (Δ **{{ latest.ifix_var_pct if latest.ifix_var_pct is not none else '-' }}**)
  - IFIL: **{{ latest.ifil_points_count if latest.ifil_points_count is not none else '-' }} pts** (Δ **{{ latest.ifil_var_pct if latest.ifil_var_pct is not none else '-' }}**)

  | Data | IBOV (pts) | IBOV (Δ%) | IFIX (pts) | IFIX (Δ%) | IFIL (pts) | IFIL (Δ%) |
  | --- | --- | --- | --- | --- | --- | --- |
  {% for r in rows %}
    | {{ r.index_date if r.index_date is not none else '-' }} | {{ r.ibov_points_count if r.ibov_points_count is not none else '-' }} | {{ r.ibov_var_pct if r.ibov_var_pct is not none else '-' }} | {{ r.ifix_points_count if r.ifix_points_count is not none else '-' }} | {{ r.ifix_var_pct if r.ifix_var_pct is not none else '-' }} | {{ r.ifil_points_count if r.ifil_points_count is not none else '-' }} | {{ r.ifil_var_pct if r.ifil_var_pct is not none else '-' }} |
  {% endfor %}
{%- else -%}
  {{ empty_message or "Nenhum registro encontrado." }}
{%- endif %}
