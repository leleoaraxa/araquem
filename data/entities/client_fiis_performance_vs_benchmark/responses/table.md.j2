{% if rows and rows|length > 0 -%}
  {% set latest = rows[0] %}
  **Performance da carteira vs {{ latest.benchmark_code or 'benchmark' }}**

  - Última referência: **{{ latest.date_reference|date_br if latest.date_reference is not none else '-' }}**
  - Retorno da carteira: **{{ latest.portfolio_return_pct|percent_br if latest.portfolio_return_pct is not none else '-' }}**
  - Retorno do benchmark: **{{ latest.benchmark_return_pct|percent_br if latest.benchmark_return_pct is not none else '-' }}**

  | Data | Retorno carteira | Retorno benchmark | Valor da carteira | Valor do benchmark |
  | --- | ---: | ---: | ---: | ---: |
  {%- for r in rows %}
  | {{ r.date_reference|date_br if r.date_reference is not none else '-' }} | {{ r.portfolio_return_pct|percent_br if r.portfolio_return_pct is not none else '-' }} | {{ r.benchmark_return_pct|percent_br if r.benchmark_return_pct is not none else '-' }} | {{ r.portfolio_amount|currency_br if r.portfolio_amount is not none else '-' }} | {{ r.benchmark_value|currency_br if r.benchmark_value is not none else '-' }} |
  {%- endfor %}
{%- else -%}
  {{ empty_message or "Sem histórico de performance para exibir." }}
{%- endif %}
