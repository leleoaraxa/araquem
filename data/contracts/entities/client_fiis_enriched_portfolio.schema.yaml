entity: client_fiis_enriched_portfolio
name: client_fiis_enriched_portfolio
kind: view
description: Carteira privada enriquecida com métricas financeiras, risco e rankings.
version: 1

columns:
  - { name: document_number,        type: string, nullable: false, desc: "identificador do cliente (document_number)." }
  - { name: position_date,          type: date,   nullable: false, desc: "data de referência da posição." }
  - { name: ticker,                 type: string, nullable: false, desc: "ticker do FII (AAAA11)." }
  - { name: fii_name,               type: string, nullable: true,  desc: "nome do fundo imobiliário." }
  - { name: qty,                    type: integer, nullable: true, desc: "quantidade de cotas na carteira." }
  - { name: closing_price,          type: number, nullable: true,  desc: "preço de fechamento usado na posição." }
  - { name: position_value,         type: number, nullable: true,  desc: "valor da posição no ativo (qty * preço)." }
  - { name: portfolio_value,        type: number, nullable: true,  desc: "valor total da carteira na data." }
  - { name: weight_pct,             type: number, nullable: true,  desc: "peso do ativo na carteira (percentual)." }
  - { name: sector,                 type: string, nullable: true,  desc: "setor do FII." }
  - { name: sub_sector,             type: string, nullable: true,  desc: "sub-setor do FII." }
  - { name: classification,         type: string, nullable: true,  desc: "classificação (ex.: Tijolo/Papel)." }
  - { name: management_type,        type: string, nullable: true,  desc: "tipo de gestão (ativa/passiva)." }
  - { name: target_market,          type: string, nullable: true,  desc: "público-alvo do fundo." }
  - { name: fii_cnpj,               type: string, nullable: true,  desc: "cnpj do fundo." }
  - { name: dy_12m_pct,             type: number, nullable: true,  desc: "dividend yield acumulado em 12 meses (percentual)." }
  - { name: dy_monthly_pct,         type: number, nullable: true,  desc: "dividend yield mensal (percentual)." }
  - { name: dividends_12m_amt,      type: number, nullable: true,  desc: "soma de dividendos pagos em 12 meses." }
  - { name: market_cap_value,       type: number, nullable: true,  desc: "market cap (quando disponível)." }
  - { name: equity_value,           type: number, nullable: true,  desc: "patrimônio líquido/valor de equity (quando disponível)." }
  - { name: volatility_ratio,       type: number, nullable: true,  desc: "indicador de volatilidade (quando disponível)." }
  - { name: sharpe_ratio,           type: number, nullable: true,  desc: "índice de Sharpe (quando disponível)." }
  - { name: sortino_ratio,          type: number, nullable: true,  desc: "índice de Sortino (quando disponível)." }
  - { name: max_drawdown,           type: number, nullable: true,  desc: "máximo drawdown (quando disponível)." }
  - { name: beta_index,             type: number, nullable: true,  desc: "beta (quando disponível)." }
  - { name: sirios_rank_position,   type: integer, nullable: true, desc: "posição no ranking interno SIRIOS (quando disponível)." }
  - { name: ifix_rank_position,     type: integer, nullable: true, desc: "posição no IFIX (quando disponível)." }
  - { name: rank_dy_12m,            type: integer, nullable: true, desc: "ranking por DY 12m (quando disponível)." }
  - { name: rank_sharpe,            type: integer, nullable: true, desc: "ranking por Sharpe (quando disponível)." }

tolerance:
  extra_columns_allowed: false
  missing_columns_allowed: false
  nullable_mismatch_warn_only: false
