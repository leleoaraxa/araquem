{% set rows = rows if rows is defined else [] %}

{% if rows and rows|length > 0 -%}
  {% set first = rows[0] %}

  **Posições da carteira de FIIs**

  - Data da posição: **{{ first.position_date if first.position_date is not none else '-' }}**
  - Valor total da carteira: **{{ first.portfolio_value if first.portfolio_value is not none else '-' }}**

  | Ticker | Quantidade | Preço de fechamento | Valor da posição | Peso na carteira | DY 12m | Setor | Classificação |
  | --- | ---: | ---: | ---: | ---: | ---: | --- | --- |
  {%- for r in rows %}
  | {{ r.ticker or '-' }} | {{ r.qty if r.qty is not none else '-' }} | {{ r.closing_price if r.closing_price is not none else '-' }} | {{ r.position_value if r.position_value is not none else '-' }} | {{ r.weight_pct if r.weight_pct is not none else '-' }} | {{ r.dy_12m_pct if r.dy_12m_pct is not none else '-' }} | {{ r.sector or '-' }} | {{ r.classification or '-' }} |
  {%- endfor %}
{%- else -%}
  {{ empty_message or "Sem posições disponíveis." }}
{%- endif %}
