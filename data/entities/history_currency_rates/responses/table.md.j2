{% set rows = rows if rows is defined else [] %}

{% if rows and rows|length > 0 -%}
  {% set latest = rows[0] %}
  **Taxas de câmbio (D-1)**

  Última data {{ latest.rate_date if latest.rate_date is not none else '-' }}:
  - USD: compra **{{ latest.usd_buy_amt if latest.usd_buy_amt is not none else '-' }}**, venda **{{ latest.usd_sell_amt if latest.usd_sell_amt is not none else '-' }}**, variação **{{ latest.usd_var_pct if latest.usd_var_pct is not none else '-' }}**
  - EUR: compra **{{ latest.eur_buy_amt if latest.eur_buy_amt is not none else '-' }}**, venda **{{ latest.eur_sell_amt if latest.eur_sell_amt is not none else '-' }}**, variação **{{ latest.eur_var_pct if latest.eur_var_pct is not none else '-' }}**

  | Data | USD compra (R$) | USD venda (R$) | USD (Δ%) | EUR compra (R$) | EUR venda (R$) | EUR (Δ%) |
  | --- | --- | --- | --- | --- | --- | --- |
  {% for r in rows %}
    | {{ r.rate_date if r.rate_date is not none else '-' }} | {{ r.usd_buy_amt if r.usd_buy_amt is not none else '-' }} | {{ r.usd_sell_amt if r.usd_sell_amt is not none else '-' }} | {{ r.usd_var_pct if r.usd_var_pct is not none else '-' }} | {{ r.eur_buy_amt if r.eur_buy_amt is not none else '-' }} | {{ r.eur_sell_amt if r.eur_sell_amt is not none else '-' }} | {{ r.eur_var_pct if r.eur_var_pct is not none else '-' }} |
  {% endfor %}
{%- else -%}
  {{ empty_message or "Nenhum registro encontrado." }}
{%- endif %}
