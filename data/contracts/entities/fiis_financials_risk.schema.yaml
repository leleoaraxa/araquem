entity: fiis_financials_risk
name: fiis_financials_risk
description: Indicadores de risco e retorno dos FIIs, incluindo volatilidade e Sharpe.
kind: view
version: 2

columns:
  - { name: ticker,            type: string,   nullable: false, desc: "código do FII (AAAA11)." }
  - { name: volatility_ratio,  type: number,   nullable: true,  desc: "indicador de volatilidade (VR)." }
  - { name: sharpe_ratio,      type: number,   nullable: true,  desc: "índice de Sharpe (SR)." }
  - { name: treynor_ratio,     type: number,   nullable: true,  desc: "índice de Treynor (TR)." }
  - { name: jensen_alpha,      type: number,   nullable: true,  desc: "alfa de Jensen (α)." }
  - { name: beta_index,        type: number,   nullable: true,  desc: "beta índice (β)." }
  - { name: sortino_ratio,     type: number,   nullable: true,  desc: "índice de Sortino (SoR)." }
  - { name: max_drawdown,      type: number,   nullable: true,  desc: "máxima queda pico→vale (MDD), reportada em módulo (0.00–1.00)." }
  - { name: r_squared,         type: number,   nullable: true,  desc: "coeficiente de determinação (R²), 0.00–1.00." }
  - { name: created_at,        type: datetime, nullable: false, desc: "data de criação." }
  - { name: updated_at,        type: datetime, nullable: false, desc: "data da última atualização." }

ordering: [ticker, updated_at DESC]

presentation:
  columns:
    ticker:           { as: string }    # código AAAA11
    volatility_ratio: { as: number }    # -0,1234
    sharpe_ratio:     { as: number }    # 1,2345
    treynor_ratio:    { as: number }    # -0,5678
    jensen_alpha:     { as: number }    # 0,0456
    beta_index:       { as: number }    # -1,1234
    sortino_ratio:    { as: number }    # 1,9876
    max_drawdown:     { as: percent, multiply_by_100: true, precision: 2 }    # (25,60%)
    r_squared:        { as: percent, multiply_by_100: true, precision: 2 }    # (85,34%)
  rules: {}

sample_questions:
  - "qual a volatilidade do HGLG11?"
  - "me fale sobre o índice de sharpe do KNRI11"
  - "qual o beta do VISC11?"
  - "qual o alfa de jensen do MXRF11?"
  - "qual o índice de treynor do HGRU11?"
  - "quais são os indicadores de risco do KNRI11?"
  - "qual o sortino do HGLG11?"
  - "qual o drawdown do KNRI11?"
  - "qual o r2 do VISC11?"

tolerance:
  extra_columns_allowed: false
  missing_columns_allowed: false
  nullable_mismatch_warn_only: true
