terms:
  - name: "narrator"
    kind: "policy"
    scope: "narrator"
    version: 1

narrator:
  llm_enabled: false        # você controla manualmente
  shadow: false             # roda ou não sem afetar UX
  model: mistral:instruct
  style: executivo
  max_llm_rows: 0           # 0 = nunca chama o LLM
  max_prompt_tokens: 4000
  max_output_tokens: 700

  # Políticas específicas por entidade (opcional)
  #
  # Objetivo: evitar respostas "por fundo" quando a pergunta é
  # claramente conceitual, como:
  #   - "o que é índice de Treynor?"
  #   - "explique o que é beta em FIIs"
  #
  # Para entidades com prefer_concept_when_no_ticker=true:
  #   - Narrator procura tickers no formato AAAA11 na pergunta original
  #     e/ou nos filtros explícitos (meta/facts.filters).
  #   - Sem ticker → modo CONCEITO (limpa rows/primary e sinaliza meta.narrator_mode).
  #   - Com pelo menos 1 ticker → modo POR FUNDO (usa rows normalmente).
  entities:
    fiis_financials_risk:
      prefer_concept_when_no_ticker: true
      rag_fallback_when_no_rows: true
      concept_with_data_when_rag: true
