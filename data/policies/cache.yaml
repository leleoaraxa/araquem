terms:
- name: cache
  kind: policy
  scope: cache
  version: 1
sensitive_fields:
  - document_number
  - doc_number
  - cpf
  - cnpj
policies:
  client_fiis_positions:
    # Entidades privadas não devem usar cache compartilhado entre clientes.
    private: true
    ttl_seconds: 900
    refresh_at: none
    scope: prv
    key_fields:
    - document_number
    - position_date
    - ticker
  client_fiis_dividends_evolution:
    ttl_seconds: 900
    refresh_at: none
    scope: prv
    key_fields:
    - document_number
    - year_reference
    - month_number
  client_fiis_performance_vs_benchmark:
    ttl_seconds: 900
    refresh_at: none
    scope: prv
    key_fields:
    - document_number
    - benchmark_code
    - date_reference
  # Resumo (última leitura) por benchmark — separado do histórico acima.
  client_fiis_performance_vs_benchmark_summary:
    ttl_seconds: 900
    refresh_at: none
    scope: prv
    key_fields:
    - document_number
    - benchmark_code
    - date_reference
  fiis_registrations:
    ttl_seconds: 86400
    refresh_at: 07:00
    scope: pub
    key_fields:
    - ticker
  fiis_precos:
    ttl_seconds: 86400
    refresh_at: 07:00
    scope: pub
    key_fields:
    - ticker
    - traded_at
  fiis_dividends:
    ttl_seconds: 86400
    refresh_at: 07:00
    scope: pub
    key_fields:
    - ticker
    - payment_date
  fiis_rankings:
    ttl_seconds: 86400
    refresh_at: 07:00
    scope: pub
    key_fields:
    - ticker
  fiis_real_estate:
    ttl_seconds: 86400
    refresh_at: 07:00
    scope: pub
    key_fields:
    - ticker
    - asset_name
  fiis_news:
    ttl_seconds: 86400
    refresh_at: 07:00
    scope: pub
    key_fields:
    - ticker
    - published_at
  fiis_processos:
    ttl_seconds: 86400
    refresh_at: 07:00
    scope: pub
    key_fields:
    - ticker
    - process_number
  fiis_financials_snapshot:
    ttl_seconds: 86400
    refresh_at: 07:00
    scope: pub
    key_fields:
    - ticker
  fiis_financials_revenue_schedule:
    ttl_seconds: 86400
    refresh_at: 07:00
    scope: pub
    key_fields:
    - ticker
  fiis_financials_risk:
    ttl_seconds: 86400
    refresh_at: 07:00
    scope: pub
    key_fields:
    - ticker
  history_currency_rates:
    ttl_seconds: 86400
    refresh_at: 07:00
    scope: pub
    key_fields:
    - rate_date
  history_b3_indexes:
    ttl_seconds: 86400
    refresh_at: 07:00
    scope: pub
    key_fields:
    - index_date
  history_market_indicators:
    ttl_seconds: 86400
    refresh_at: 07:00
    scope: pub
    key_fields:
    - indicator_date
    - indicator_name
  fiis_overview:
    ttl_seconds: 86400
    refresh_at: 07:00
    scope: pub
    key_fields:
    - ticker
  fiis_yield_history:
    ttl_seconds: 86400
    refresh_at: 07:00
    scope: pub
    key_fields:
    - ticker
    - ref_month
  fiis_dividends_yields:
    ttl_seconds: 86400
    refresh_at: 07:00
    scope: pub
    key_fields:
    - ticker
    - ref_month
  client_fiis_enriched_portfolio:
    ttl_seconds: 900
    refresh_at: none
    scope: prv
    key_fields:
    - document_number
    - position_date
    - ticker
  macro_consolidada:
    ttl_seconds: 86400
    refresh_at: 07:00
    scope: pub
    key_fields:
    - ref_date
