entity: fiis_financials_risk
kind: view
version: 2

columns:
  - { name: ticker,            type: string,   nullable: false, desc: "c√≥digo do FII (AAAA11)." }
  - { name: volatility_ratio,  type: number,   nullable: true,  desc: "indicador de volatilidade (VR)." }
  - { name: sharpe_ratio,      type: number,   nullable: true,  desc: "√≠ndice de Sharpe (SR)." }
  - { name: treynor_ratio,     type: number,   nullable: true,  desc: "√≠ndice de Treynor (TR)." }
  - { name: jensen_alpha,      type: number,   nullable: true,  desc: "alfa de Jensen (Œ±)." }
  - { name: beta_index,        type: number,   nullable: true,  desc: "beta √≠ndice (Œ≤)." }
  - { name: sortino_ratio,     type: number,   nullable: true,  desc: "√≠ndice de Sortino (SoR)." }
  - { name: max_drawdown,      type: number,   nullable: true,  desc: "m√°xima queda pico‚Üívale (MDD), reportada em m√≥dulo (0.00‚Äì1.00)." }
  - { name: r_squared,         type: number,   nullable: true,  desc: "coeficiente de determina√ß√£o (R¬≤), 0.00‚Äì1.00." }
  - { name: created_at,        type: datetime, nullable: false, desc: "data de cria√ß√£o." }
  - { name: updated_at,        type: datetime, nullable: false, desc: "data da √∫ltima atualiza√ß√£o." }

ordering: [ticker]

presentation:
  columns:
    ticker:           { as: string }    # c√≥digo AAAA11
    volatility_ratio: { as: number }    # 0,1234
    sharpe_ratio:     { as: number }    # 1,2345
    treynor_ratio:    { as: number }    # 0,5678
    jensen_alpha:     { as: number }    # 0,0456
    beta_index:       { as: number }    # 1,1234
    sortino_ratio:    { as: number }    # 1,9876
    max_drawdown:     { as: number }    # 0,2560  (25,60%)
    r_squared:        { as: number }    # 0,7321  (73,21%)
  rules: {}

sample_questions:
  - "qual a volatilidade do HGLG11?"
  - "me fale sobre o √≠ndice de sharpe do KNRI11"
  - "qual o beta do VISC11?"
  - "qual o alfa de jensen do MXRF11?"
  - "qual o √≠ndice de treynor do HGRU11?"
  - "quais s√£o as m√©tricas de risco do KNRI11?"
  - "qual o sortino do HGLG11?"
  - "qual o drawdown do KNRI11?"
  - "qual o r2 do VISC11?"

tolerance:
  extra_columns_allowed: false
  missing_columns_allowed: false
  nullable_mismatch_warn_only: true

# üìö Documentation linkage (safe extension block ‚Äì ignored by strict loaders)
x-docs:
  catalog_path: data/raw/indicators/catalog.md
  anchors:
    beta_index:        "#1-beta-√≠ndice"
    sharpe_ratio:      "#2-sharpe-ratio"
    jensen_alpha:      "#3-alpha-de-jensen"
    volatility_ratio:  "#4-volatility-ratio"
    treynor_ratio:     "#5-treynor-ratio"
    sortino_ratio:     "#6-sortino-ratio"
    max_drawdown:      "#7-max-drawdown-mdd"
    r_squared:         "#8-r¬≤-coeficiente-de-determina√ß√£o"
  notes:
    - "√Çncoras seguem slug GitHub-style; ajuste se necess√°rio ap√≥s render."
    - "C√°lculos feitos na origem (Python). Esta view s√≥ consome valores prontos."
